<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ESFJ 빙고 챌린지</title>
    <link rel="stylesheet" href="/u/tests/assets/css/main.css?20251012150000">
    <style>
        .bingo-grid {
            display: grid;
            grid-template-columns: repeat(5, 1fr);
            gap: 5px;
            width: 100%;
            max-width: 600px; /* Adjust as needed */
            margin: 20px auto;
            border: 2px solid var(--card-border);
            padding: 5px;
            border-radius: 8px;
            background-color: var(--card-bg);
        }
        .bingo-cell {
            background-color: var(--container-bg);
            border: 1px solid var(--card-border);
            border-radius: 5px;
            display: flex;
            justify-content: center;
            align-items: center;
            text-align: center;
            padding: 10px;
            min-height: 80px; /* Ensure cells are large enough */
            cursor: pointer;
            user-select: none;
            transition: background-color 0.2s, border-color 0.2s;
            font-size: 0.9em;
            line-height: 1.3;
        }
        .bingo-cell.marked {
            background-color: var(--nav-link-hover);
            color: white;
            border-color: var(--nav-link-hover);
        }
        .bingo-cell:hover:not(.marked) {
            background-color: var(--card-border);
        }
        #bingo-message {
            text-align: center;
            font-size: 1.5em;
            font-weight: bold;
            color: var(--success-color);
            margin-top: 20px;
            display: none;
        }
        .btn-bingo-reset {
            display: block;
            margin: 20px auto;
        }
    </style>
</head>
<body>
    <header class="main-nav">
        <a href="/u/tests/" class="logo">ESFJ.KR Tests</a>
        <div class="nav-right-section">
            <nav class="nav-links" id="nav-links">
                <!-- Dynamic menu will be loaded here by dynamic-menu.js -->
            </nav>
            <button id="theme-switcher" class="theme-switcher">🌙</button>
            <button id="hamburger" class="hamburger">☰</button>
        </div>
    </header>
    <div class="container">
        <h1>ESFJ 빙고 챌린지</h1>
        <p style="text-align:center;">ESFJ 특징으로 구성된 빙고 게임. 해당되는 항목을 클릭하여 빙고를 완성해 보세요!</p>
        
        <div id="bingo-grid" class="bingo-grid"></div>
        <div id="bingo-message">빙고! 축하합니다!</div>
        <button id="reset-bingo-btn" class="btn btn-primary btn-bingo-reset">다시 시작하기</button>
    </div>

    <script src="/u/tests/assets/js/main.js?20251012150000" defer></script>
    <script src="/u/tests/assets/js/dynamic-menu.js" defer></script>
    <script>
        const bingoItems = [
            "새로운 사람 만나면 TMI 방출",
            "친구 생일 1등으로 챙겨줌",
            "인간관계 손절 잘 못함",
            "남의 부탁 거절 못 해서 끙끙 앓음",
            ""너 괜찮아?" 입에 달고 삼",
            "계획 틀어지면 스트레스 받음",
            "어색한 침묵 못 견딤",
            "칭찬 받으면 하루 종일 기분 좋음",
            "남들 챙기느라 정작 나는 못 챙김",
            "어딜 가나 분위기 메이커",
            ""내가 뭐랬어" 보다 "그럴 수 있지"",
            "기념일, 생일 절대 안 까먹음",
            ""밥은 먹었어?"가 단골 멘트",
            "나 빼고 자기들끼리 노는 거 절대 못 봄",
            "내 이야기보다 남의 이야기 들어주는 게 편함",
            ""다 너 잘되라고 하는 소리야" 자주 함",
            "눈치 빠르다는 소리 자주 들음",
            "모임, 약속 없으면 불안함",
            "감정적인 사람 보면 같이 울어줌",
            "리액션 부자, 영혼 없는 리액션도 가능",
            "전통이나 규칙은 지켜야 마음이 편함",
            ""힘들면 언제든 말해" 진심 100%",
            "은근히 서열, 위계질서 중요하게 생각함",
            "첫인상으로 사람 판단 잘 안 함",
            ""우리"라는 말을 자주 씀"
        ];

        const bingoGridEl = document.getElementById('bingo-grid');
        const bingoMessageEl = document.getElementById('bingo-message');
        const resetBingoBtn = document.getElementById('reset-bingo-btn');
        let markedCells = Array(25).fill(false);

        function shuffleArray(array) {
            for (let i = array.length - 1; i > 0; i--) {
                const j = Math.floor(Math.random() * (i + 1));
                [array[i], array[j]] = [array[j], array[i]];
            }
            return array;
        }

        function createBingoGrid() {
            bingoGridEl.innerHTML = '';
            const shuffledItems = shuffleArray([...bingoItems]); // Shuffle a copy
            markedCells = Array(25).fill(false); // Reset marked cells

            shuffledItems.forEach((item, index) => {
                const cell = document.createElement('div');
                cell.className = 'bingo-cell';
                cell.textContent = item;
                cell.dataset.index = index;
                cell.addEventListener('click', toggleCellMarked);
                bingoGridEl.appendChild(cell);
            });
            bingoMessageEl.style.display = 'none';
        }

        function toggleCellMarked(event) {
            const cell = event.target;
            const index = parseInt(cell.dataset.index);
            markedCells[index] = !markedCells[index];
            cell.classList.toggle('marked', markedCells[index]);
            checkBingo();
        }

        function checkBingo() {
            const lines = [
                // Rows
                [0, 1, 2, 3, 4], [5, 6, 7, 8, 9], [10, 11, 12, 13, 14], [15, 16, 17, 18, 19], [20, 21, 22, 23, 24],
                // Columns
                [0, 5, 10, 15, 20], [1, 6, 11, 16, 21], [2, 7, 12, 17, 22], [3, 8, 13, 18, 23], [4, 9, 14, 19, 24],
                // Diagonals
                [0, 6, 12, 18, 24], [4, 8, 12, 16, 20]
            ];

            for (const line of lines) {
                if (line.every(index => markedCells[index])) {
                    bingoMessageEl.style.display = 'block';
                    return;
                }
            }
            bingoMessageEl.style.display = 'none';
        }

        resetBingoBtn.addEventListener('click', createBingoGrid);

        // Initialize on load
        createBingoGrid();
    </script>
</body>
</html>